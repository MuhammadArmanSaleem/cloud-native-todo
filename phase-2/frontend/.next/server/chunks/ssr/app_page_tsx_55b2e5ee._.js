module.exports=[60350,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=Object.defineProperty,e=Object.defineProperties,f=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,j=(a,b,c)=>b in a?d(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,k=(a,b)=>{for(var c in b||(b={}))h.call(b,c)&&j(a,c,b[c]);if(g)for(var c of g(b))i.call(b,c)&&j(a,c,b[c]);return a},l=(a,b)=>e(a,f(b)),m=class extends Error{constructor(a,b,c){super(b||a.toString(),{cause:c}),this.status=a,this.statusText=b,this.error=c}},n=async(a,b)=>{var c,d,e,f,g,h;let i=b||{},j={onRequest:[null==b?void 0:b.onRequest],onResponse:[null==b?void 0:b.onResponse],onSuccess:[null==b?void 0:b.onSuccess],onError:[null==b?void 0:b.onError],onRetry:[null==b?void 0:b.onRetry]};if(!b||!(null==b?void 0:b.plugins))return{url:a,options:i,hooks:j};for(let k of(null==b?void 0:b.plugins)||[]){if(k.init){let d=await (null==(c=k.init)?void 0:c.call(k,a.toString(),b));i=d.options||i,a=d.url}j.onRequest.push(null==(d=k.hooks)?void 0:d.onRequest),j.onResponse.push(null==(e=k.hooks)?void 0:e.onResponse),j.onSuccess.push(null==(f=k.hooks)?void 0:f.onSuccess),j.onError.push(null==(g=k.hooks)?void 0:g.onError),j.onRetry.push(null==(h=k.hooks)?void 0:h.onRetry)}return{url:a,options:i,hooks:j}},o=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(){return this.options.delay}},p=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(a){return Math.min(this.options.maxDelay,this.options.baseDelay*2**a)}},q=["get","post","put","patch","delete"],r=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function s(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}function t(a){try{return JSON.parse(a)}catch(b){return a}}var u=async(a,b)=>{var c,d,e,f,g,h,i,j;let v,{hooks:w,url:x,options:y}=await n(a,b),z=function(a){if(null==a?void 0:a.customFetchImpl)return a.customFetchImpl;if("undefined"!=typeof globalThis&&"function"==typeof globalThis.fetch)return globalThis.fetch;throw Error("No fetch implementation found")}(y),A=new AbortController,B=null!=(c=y.signal)?c:A.signal,C=function(a,b){let{baseURL:c,params:d,query:e}=b||{query:{},params:{},baseURL:""},f=a.startsWith("http")?a.split("/").slice(0,3).join("/"):c;if(!f)throw TypeError(`Invalid URL ${a}. Are you passing in a relative URL but not setting the baseURL?`);if(a.startsWith("@")){let b=a.toString().split("@")[1].split("/")[0];q.includes(b)&&(a=a.replace(`@${b}/`,"/"))}f.endsWith("/")||(f+="/");let[g,h]=a.replace(f,"").split("?"),i=new URLSearchParams(h);for(let[a,b]of Object.entries(e||{}))i.set(a,String(b));if(d)if(Array.isArray(d))for(let[a,b]of g.split("/").filter(a=>a.startsWith(":")).entries()){let c=d[a];g=g.replace(b,c)}else for(let[a,b]of Object.entries(d))g=g.replace(`:${a}`,String(b));(g=g.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(g=g.slice(1));let j=i.size>0?`?${i}`.replace(/\+/g,"%20"):"";return new URL(`${g}${j}`,f)}(x,y),D=function(a){if(!(null==a?void 0:a.body))return null;let b=new Headers(null==a?void 0:a.headers);return s(a.body)&&!b.has("content-type")?JSON.stringify(a.body):a.body}(y),E=function(a){let b=new Headers(null==a?void 0:a.headers);for(let[c,d]of Object.entries((a=>{let b={},c=a=>"function"==typeof a?a():a;if(null==a?void 0:a.auth){if("Bearer"===a.auth.type){let d=c(a.auth.token);if(!d)return b;b.authorization=`Bearer ${d}`}else if("Basic"===a.auth.type){let d=c(a.auth.username),e=c(a.auth.password);if(!d||!e)return b;b.authorization=`Basic ${btoa(`${d}:${e}`)}`}else if("Custom"===a.auth.type){let d=c(a.auth.value);if(!d)return b;b.authorization=`${c(a.auth.prefix)} ${d}`}}return b})(a)||{}))b.set(c,d);if(!b.has("content-type")){let c=s(null==a?void 0:a.body)?"application/json":null;c&&b.set("content-type",c)}return b}(y),F=function(a,b){var c;if(null==b?void 0:b.method)return b.method.toUpperCase();if(a.startsWith("@")){let d=null==(c=a.split("@")[1])?void 0:c.split("/")[0];return q.includes(d)?d.toUpperCase():(null==b?void 0:b.body)?"POST":"GET"}return(null==b?void 0:b.body)?"POST":"GET"}(x,y),G=l(k({},y),{url:C,headers:E,body:D,method:F,signal:B});for(let a of w.onRequest)if(a){let b=await a(G);b instanceof Object&&(G=b)}("pipeTo"in G&&"function"==typeof G.pipeTo||"function"==typeof(null==(d=null==b?void 0:b.body)?void 0:d.pipe))&&!("duplex"in G)&&(G.duplex="half");let{clearTimeout:H}=(!(null==y?void 0:y.signal)&&(null==y?void 0:y.timeout)&&(v=setTimeout(()=>null==A?void 0:A.abort(),null==y?void 0:y.timeout)),{abortTimeout:v,clearTimeout:()=>{v&&clearTimeout(v)}}),I=await z(G.url,G);H();let J={response:I,request:G};for(let a of w.onResponse)if(a){let c=await a(l(k({},J),{response:(null==(e=null==b?void 0:b.hookOptions)?void 0:e.cloneResponse)?I.clone():I}));c instanceof Response?I=c:c instanceof Object&&(I=c.response)}if(I.ok){if("HEAD"===G.method)return{data:"",error:null};let a=function(a){let b=a.headers.get("content-type"),c=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!b)return"json";let d=b.split(";").shift()||"";return r.test(d)?"json":c.has(d)||d.startsWith("text/")?"text":"blob"}(I),c={data:"",response:I,request:G};if("json"===a||"text"===a){let a=await I.text(),b=null!=(f=G.jsonParser)?f:t;c.data=await b(a)}else c.data=await I[a]();for(let a of((null==G?void 0:G.output)&&G.output&&!G.disableValidation&&(c.data=G.output.parse(c.data)),w.onSuccess))a&&await a(l(k({},c),{response:(null==(g=null==b?void 0:b.hookOptions)?void 0:g.cloneResponse)?I.clone():I}));return(null==b?void 0:b.throw)?c.data:{data:c.data,error:null}}let K=null!=(h=null==b?void 0:b.jsonParser)?h:t,L=await I.text(),M=!function(a){try{return JSON.parse(a),!0}catch(a){return!1}}(L)?{}:await K(L),N={response:I,request:G,error:l(k({},M),{status:I.status,statusText:I.statusText})};for(let a of w.onError)a&&await a(l(k({},N),{response:(null==(i=null==b?void 0:b.hookOptions)?void 0:i.cloneResponse)?I.clone():I}));if(null==b?void 0:b.retry){let c=function(a){if("number"==typeof a)return new o({type:"linear",attempts:a,delay:1e3});switch(a.type){case"linear":return new o(a);case"exponential":return new p(a);default:throw Error("Invalid retry strategy")}}(b.retry),d=null!=(j=b.retryAttempt)?j:0;if(await c.shouldAttemptRetry(d,I)){for(let a of w.onRetry)a&&await a(J);let e=c.getDelay(d);return await new Promise(a=>setTimeout(a,e)),await u(a,l(k({},b),{retryAttempt:d+1}))}}if(null==b?void 0:b.throw)throw new m(I.status,I.statusText,M);return{data:null,error:l(k({},M),{status:I.status,statusText:I.statusText})}};let v=[],w=0,x=0,y=a=>{let b=[],c={get:()=>(c.lc||c.listen(()=>{})(),c.value),lc:0,listen:a=>(c.lc=b.push(a),()=>{for(let b=w+4;b<v.length;)v[b]===a?v.splice(b,4):b+=4;let d=b.indexOf(a);~d&&(b.splice(d,1),--c.lc||c.off())}),notify(a,d){x++;let e=!v.length;for(let e of b)v.push(e,c.value,a,d);if(e){for(w=0;w<v.length;w+=4)v[w](v[w+1],v[w+2],v[w+3]);v.length=0}},off(){},set(a){let b=c.value;b!==a&&(c.value=a,c.notify(b))},subscribe(a){let b=c.listen(a);return a(c.value),b},value:a};return c},z=(a,b)=>{var c,d;return c=c=>{let d=b(c);d&&a.events[6].push(d)},d=b=>{let c=a.listen;a.listen=(...d)=>(a.lc||a.active||(a.active=!0,b()),c(...d));let d=a.off;return a.events[6]=[],a.off=()=>{d(),setTimeout(()=>{if(a.active&&!a.lc){for(let b of(a.active=!1,a.events[6]))b();a.events[6]=[]}},1e3)},()=>{a.listen=c,a.off=d}},a.events=a.events||{},a.events[15]||(a.events[15]=d(b=>{a.events[5].reduceRight((a,b)=>(b(a),a),{shared:{},...b})})),a.events[5]=a.events[5]||[],a.events[5].push(c),()=>{let b=a.events[5],d=b.indexOf(c);b.splice(d,1),b.length||(delete a.events[5],a.events[15](),delete a.events[15])}};var A=Object.create(null),B=a=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(a?A:globalThis),C=new Proxy(A,{get:(a,b)=>B()[b]??A[b],has:(a,b)=>b in B()||b in A,set:(a,b,c)=>(B(!0)[b]=c,!0),deleteProperty(a,b){if(!b)return!1;let c=B(!0);return delete c[b],!0},ownKeys:()=>Object.keys(B(!0))});"test"===("u">typeof process&&process.env&&"production"||"")||C.TEST;var D=class extends Error{constructor(a,b){super(a),this.name="BetterAuthError",this.message=a,this.cause=b,this.stack=""}};function E(a,b="/api/auth"){return!function(a){try{return"/"!==new URL(a).pathname}catch{throw new D(`Invalid base URL: ${a}. Please provide a valid base URL.`)}}(a)?(b=b.startsWith("/")?b:`/${b}`,`${a}${b}`):a}var F={id:"redirect",name:"Redirect",hooks:{onSuccess(a){a.data?.url&&a.data?.redirect}}},G={id:"add-current-url",name:"Add current URL",hooks:{onRequest:a=>a}},H=(a,b)=>c=>{a.current=c,b()};let{signIn:I,signOut:J,useSession:K}=function(a){var b,d;let{pluginPathMethods:e,pluginsActions:f,pluginsAtoms:g,$fetch:h,$store:i,atomListeners:j}=(a=>{var b;let c,d="credentials"in Request.prototype,e=function(a,b){if(a)return E(a,void 0);let c=C.BETTER_AUTH_URL||C.NEXT_PUBLIC_BETTER_AUTH_URL||C.PUBLIC_BETTER_AUTH_URL||C.NUXT_PUBLIC_BETTER_AUTH_URL||C.NUXT_PUBLIC_AUTH_URL||("/"!==C.BASE_URL?C.BASE_URL:void 0);if(c)return E(c,void 0)}(a?.baseURL),f=a?.plugins?.flatMap(a=>a.fetchPlugins).filter(a=>void 0!==a)||[],g=(b={baseURL:e,...d?{credentials:"include"}:{},method:"GET",...a?.fetchOptions,plugins:a?.disableDefaultFetchPlugins?[...a?.fetchOptions?.plugins||[],...f]:[F,G,...a?.fetchOptions?.plugins||[],...f]},async function(a,c){let d,e=l(k(k({},b),c),{plugins:[...(null==b?void 0:b.plugins)||[],(d=b||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(a,b){var c,e,f,g;let h=(null==(e=null==(c=d.plugins)?void 0:c.find(b=>{var c;return null!=(c=b.schema)&&!!c.config&&(a.startsWith(b.schema.config.baseURL||"")||a.startsWith(b.schema.config.prefix||""))}))?void 0:e.schema)||d.schema;if(h){let c=a;(null==(f=h.config)?void 0:f.prefix)&&c.startsWith(h.config.prefix)&&(c=c.replace(h.config.prefix,""),h.config.baseURL&&(a=a.replace(h.config.prefix,h.config.baseURL))),(null==(g=h.config)?void 0:g.baseURL)&&c.startsWith(h.config.baseURL)&&(c=c.replace(h.config.baseURL,""));let d=h.schema[c];if(d){let c=l(k({},b),{method:d.method,output:d.output});return(null==b?void 0:b.disableValidation)||(c=l(k({},c),{body:d.input?d.input.parse(null==b?void 0:b.body):null==b?void 0:b.body,params:d.params?d.params.parse(null==b?void 0:b.params):null==b?void 0:b.params,query:d.query?d.query.parse(null==b?void 0:b.query):null==b?void 0:b.query})),{url:a,options:c}}}return{url:a,options:b}}})]});if(null==b?void 0:b.catchAllError)try{return await u(a,e)}catch(a){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:a}}}return await u(a,e)}),{$sessionSignal:h,session:i}={session:((a,b,c,d)=>{let e=y({data:null,error:null,isPending:!0,isRefetching:!1}),f=()=>{let a="function"==typeof d?d({data:e.get().data,error:e.get().error,isPending:e.get().isPending}):d;return c(b,{...a,async onSuccess(b){e.set({data:b.data,error:null,isPending:!1,isRefetching:!1}),await a?.onSuccess?.(b)},async onError(b){e.set({error:b.error,data:null,isPending:!1,isRefetching:!1}),await a?.onError?.(b)},async onRequest(b){let c=e.get();e.set({isPending:null===c.data,data:c.data,error:null,isRefetching:!0}),await a?.onRequest?.(b)}})};a=Array.isArray(a)?a:[a];let g=!1;for(let b of a)b.subscribe(()=>{g?f():z(e,()=>(f(),g=!0,()=>{e.off(),b.off()}))});return e})(c=y(!1),"/get-session",g,{method:"GET"}),$sessionSignal:c},j=a?.plugins||[],m={},n={$sessionSignal:h,session:i},o={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST"},p=[{signal:"$sessionSignal",matcher:a=>"/sign-out"===a||"/update-user"===a||a.startsWith("/sign-in")||a.startsWith("/sign-up")}];for(let a of j)a.getAtoms&&Object.assign(n,a.getAtoms?.(g)),a.pathMethods&&Object.assign(o,a.pathMethods),a.atomListeners&&p.push(...a.atomListeners);let q={notify:a=>{n[a].set(!n[a].get())},listen:(a,b)=>{n[a].subscribe(b)},atoms:n};for(let a of j)a.getActions&&Object.assign(m,a.getActions?.(g,q));return{pluginsActions:m,pluginsAtoms:n,pluginPathMethods:o,atomListeners:p,$fetch:g,$store:q}})(a),m={};for(let[a,b]of Object.entries(g)){m[`use${(d=a).charAt(0).toUpperCase()+d.slice(1)}`]=()=>(function(a,{keys:b,deps:d=[a,b]}={}){let e=(0,c.useRef)();e.current=a.get();let f=(0,c.useCallback)(c=>{var d;let f;return(b?.length||0)>0?(d=H(e,c),f=new Set(b).add(void 0),a.listen((a,b,c)=>{f.has(c)&&d(a,b,c)})):a.listen(H(e,c))},d),g=()=>e.current;return(0,c.useSyncExternalStore)(f,g,g)})(b)}return b={...f,...m,$fetch:h,$store:i},function a(c=[]){return new Proxy(function(){},{get(d,e){let f=[...c,e],g=b;for(let a of f)if(g&&"object"==typeof g&&a in g)g=g[a];else{g=void 0;break}return"function"==typeof g?g:a(f)},apply:async(a,b,d)=>{let f="/"+c.map(a=>a.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)).join("/"),i=d[0]||{},k=d[1]||{},{query:l,fetchOptions:m,...n}=i,o={...k,...m},p=function(a,b,c){let d=b[a],{fetchOptions:e,query:f,...g}=c||{};return d||(e?.method?e.method:g&&Object.keys(g).length>0?"POST":"GET")}(f,e,i);return await h(f,{...o,body:"GET"===p?void 0:{...n,...o?.body||{}},query:l||o?.query,method:p,async onSuccess(a){await o?.onSuccess?.(a);let b=j?.find(a=>a.matcher(f));if(!b)return;let c=g[b.signal];if(!c)return;let d=c.get();setTimeout(()=>{c.set(!d)},10)}})}})}()}({baseURL:process.env.NEXT_PUBLIC_BETTER_AUTH_URL||"http://localhost:8000"}),L=new class{baseUrl;token;constructor(){this.baseUrl=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",this.token=null}setToken(a){this.token=a}async getTasks(a){let b=new URLSearchParams;a?.status&&b.append("status",a.status),a?.priority&&b.append("priority",a.priority),a?.tags&&b.append("tags",a.tags),a?.search&&b.append("search",a.search),a?.sort&&b.append("sort",a.sort),a?.order&&b.append("order",a.order);let c=`${this.baseUrl}/api/tasks${b.toString()?`?${b.toString()}`:""}`,d=await fetch(c,{headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}});if(!d.ok)throw Error(`Failed to fetch tasks: ${d.statusText}`);return(await d.json()).tasks||[]}async createTask(a){let b=await fetch(`${this.baseUrl}/api/tasks`,{method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error(`Failed to create task: ${b.statusText}`);return await b.json()}async updateTask(a,b){let c=await fetch(`${this.baseUrl}/api/tasks/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error(`Failed to update task: ${c.statusText}`);return await c.json()}async deleteTask(a){let b=await fetch(`${this.baseUrl}/api/tasks/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${this.token}`}});if(!b.ok)throw Error(`Failed to delete task: ${b.statusText}`);return await b.json()}async toggleTaskCompletion(a){let b=await fetch(`${this.baseUrl}/api/tasks/${a}/complete`,{method:"PATCH",headers:{Authorization:`Bearer ${this.token}`}});if(!b.ok)throw Error(`Failed to toggle task completion: ${b.statusText}`);return await b.json()}};function M({priority:a,size:c="md"}){if(!a)return null;let d={high:{color:"bg-red-500",label:"High"},medium:{color:"bg-yellow-500",label:"Medium"},low:{color:"bg-green-500",label:"Low"}}[a];return(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:`${"sm"===c?"w-2 h-2":"w-3 h-3"} ${d.color} rounded-full`,"aria-label":d.label}),(0,b.jsx)("span",{className:"text-xs text-gray-600",children:d.label})]})}function N({children:a,onClick:c,variant:d="primary",size:e="md",disabled:f=!1,type:g="button",className:h=""}){return(0,b.jsx)("button",{type:g,className:`font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[d]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[e]} ${f?"opacity-50 cursor-not-allowed":""} ${h}`,onClick:c,disabled:f,children:a})}function O({task:a,onToggleComplete:c,onEdit:d,onDelete:e}){let f=a.due_date&&new Date(a.due_date)<new Date&&!a.completed,g=a.due_date&&!f&&new Date(a.due_date).getTime()-Date.now()<864e5;return(0,b.jsx)("li",{className:"p-4 border-b border-gray-200 hover:bg-gray-50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.completed,onChange:()=>c(a.id),className:"mt-1 h-4 w-4 text-blue-600 rounded focus:ring-blue-500","aria-label":`Mark task "${a.title}" as ${a.completed?"incomplete":"complete"}`}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h3",{className:`text-base font-medium ${a.completed?"line-through text-gray-500":"text-gray-900"}`,children:a.title}),a.priority&&(0,b.jsx)(M,{priority:a.priority,size:"sm"}),a.recurring_pattern&&(0,b.jsx)("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-0.5 rounded",children:a.recurring_pattern})]}),a.description&&(0,b.jsx)("p",{className:`text-sm text-gray-600 mb-2 ${a.completed?"line-through":""}`,children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[a.tags&&a.tags.length>0&&(0,b.jsx)("div",{className:"flex gap-1.5 flex-wrap",children:a.tags.map(a=>(0,b.jsx)("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-0.5 rounded",children:a},a))}),a.due_date&&(0,b.jsxs)("span",{className:`text-xs ${f?"text-red-600 font-medium":g?"text-yellow-600 font-medium":"text-gray-500"}`,children:["Due: ",new Date(a.due_date).toLocaleDateString()]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(N,{variant:"ghost",size:"sm",onClick:()=>d(a),disabled:a.completed,children:"Edit"}),(0,b.jsx)(N,{variant:"danger",size:"sm",onClick:()=>{confirm(`Delete task "${a.title}"?`)&&e(a.id)},children:"Delete"})]})]})})}function P({tasks:a,onToggleComplete:c,onEdit:d,onDelete:e,emptyMessage:f="No tasks found"}){return 0===a.length?(0,b.jsx)("div",{className:"p-12 text-center",children:(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:f})}):(0,b.jsx)("ul",{className:"divide-y divide-gray-200",children:a.map(a=>(0,b.jsx)(O,{task:a,onToggleComplete:c,onEdit:d,onDelete:e},a.id))})}function Q(a){return a.replace(/<[^>]*>/g,"").replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/on\w+\s*=\s*["'][^"']*["']/gi,"").replace(/javascript:/gi,"").trim()}function R(a){return!(/<script/i.test(a)||/on\w+\s*=/i.test(a)||/javascript:/i.test(a)||/data:text\/html/i.test(a))}function S({label:a,error:c,className:d="",...e}){return(0,b.jsxs)("div",{children:[a&&(0,b.jsx)("label",{htmlFor:e.id,className:"block text-sm font-medium text-gray-700 mb-1.5",children:a}),(0,b.jsx)("input",{className:`
          w-full 
          px-3 py-2 
          border rounded-md 
          text-gray-900 
          placeholder-gray-400
          focus:outline-none 
          focus:ring-2 
          focus:ring-blue-500 
          focus:border-transparent
          ${c?"border-red-300":"border-gray-300"}
          ${d}
        `,...e}),c&&(0,b.jsx)("p",{className:"mt-1.5 text-sm text-red-600",children:c})]})}function T({task:a,onSubmit:d,onCancel:e,isSubmitting:f=!1}){let[g,h]=(0,c.useState)({title:a?.title||"",description:a?.description||"",priority:a?.priority||"medium",tags:a?.tags||[],due_date:a?.due_date?a.due_date.split("T")[0]:"",reminder_time:a?.reminder_time?a.reminder_time.split("T")[0]+"T"+a.reminder_time.split("T")[1]:"",recurring_pattern:a?.recurring_pattern||void 0}),[i,j]=(0,c.useState)({}),[k,l]=(0,c.useState)(""),m=a=>{let{name:b,value:c}=a.target,d="title"===b||"description"===b?Q(c):c;h(a=>({...a,[b]:d})),i[b]&&j(a=>{let c={...a};return delete c[b],c})},n=()=>{if(!k.trim())return;let a=Q(k.trim());a&&!g.tags?.includes(a)&&(h(b=>({...b,tags:[...b.tags||[],a]})),l(""))},o=async a=>{a.preventDefault();let b=function(a){let b={};if(a.title&&a.title.trim()){let c=Q(a.title);R(c)?c.length<1?b.title="Title cannot be empty":c.length>200&&(b.title="Title must be 200 characters or less"):b.title="Invalid characters detected"}else b.title="Title is required";if(a.description){let c=Q(a.description);R(c)?c.length>1e3&&(b.description="Description must be 1000 characters or less"):b.description="Invalid characters detected"}if(a.due_date&&isNaN(new Date(a.due_date).getTime())&&(b.due_date="Invalid date format"),a.reminder_time){let c=new Date(a.reminder_time);isNaN(c.getTime())?b.reminder_time="Invalid time format":a.due_date&&c>new Date(a.due_date)&&(b.reminder_time="Reminder time must be before due date")}return b}(g);Object.keys(b).length>0?j(b):await d(g)};return(0,b.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,b.jsx)(S,{label:"Title *",name:"title",value:g.title,onChange:m,error:i.title,required:!0,maxLength:200}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Description"}),(0,b.jsx)("textarea",{id:"description",name:"description",value:g.description||"",onChange:m,rows:3,maxLength:1e3,className:`
            w-full px-3 py-2 border rounded-md
            text-gray-900 placeholder-gray-400
            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
            ${i.description?"border-red-300":"border-gray-300"}
          `}),i.description&&(0,b.jsx)("p",{className:"mt-1.5 text-sm text-red-600",children:i.description})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Priority"}),(0,b.jsxs)("select",{id:"priority",name:"priority",value:g.priority||"medium",onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"low",children:"Low"}),(0,b.jsx)("option",{value:"medium",children:"Medium"}),(0,b.jsx)("option",{value:"high",children:"High"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Tags"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,b.jsx)("input",{type:"text",id:"tags",value:k,onChange:a=>l(Q(a.target.value)),onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),n())},placeholder:"Add a tag and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)(N,{type:"button",variant:"secondary",onClick:n,children:"Add"})]}),g.tags&&g.tags.length>0&&(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:g.tags.map(a=>(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{h(b=>({...b,tags:b.tags?.filter(b=>b!==a)||[]}))},className:"text-gray-500 hover:text-gray-700","aria-label":`Remove tag ${a}`,children:"×"})]},a))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(S,{label:"Due Date",name:"due_date",type:"date",value:g.due_date||"",onChange:m,error:i.due_date}),(0,b.jsx)(S,{label:"Reminder Time",name:"reminder_time",type:"datetime-local",value:g.reminder_time||"",onChange:m,error:i.reminder_time})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"recurring_pattern",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Recurring Pattern"}),(0,b.jsxs)("select",{id:"recurring_pattern",name:"recurring_pattern",value:g.recurring_pattern||"",onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"None"}),(0,b.jsx)("option",{value:"daily",children:"Daily"}),(0,b.jsx)("option",{value:"weekly",children:"Weekly"}),(0,b.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(N,{type:"button",variant:"secondary",onClick:e,disabled:f,children:"Cancel"}),(0,b.jsx)(N,{type:"submit",disabled:f,children:f?"Saving...":a?"Update Task":"Create Task"})]})]})}function U({filters:a,onFiltersChange:c,availableTags:d}){let e=(b,d)=>{c({...a,[b]:d||void 0})},f=Object.keys(a).length>0;return(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Filters & Search"}),f&&(0,b.jsx)(N,{variant:"ghost",size:"sm",onClick:()=>{c({})},children:"Clear All"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(S,{label:"Search",name:"search",type:"text",value:a.search||"",onChange:a=>e("search",a.target.value),placeholder:"Search tasks..."}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Status"}),(0,b.jsxs)("select",{id:"status",value:a.status||"all",onChange:a=>e("status","all"===a.target.value?void 0:a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"all",children:"All"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Priority"}),(0,b.jsxs)("select",{id:"priority",value:a.priority||"",onChange:a=>e("priority",a.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Priorities"}),(0,b.jsx)("option",{value:"high",children:"High"}),(0,b.jsx)("option",{value:"medium",children:"Medium"}),(0,b.jsx)("option",{value:"low",children:"Low"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"sort",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Sort By"}),(0,b.jsxs)("select",{id:"sort",value:a.sort||"created_at",onChange:a=>e("sort",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"created_at",children:"Created Date"}),(0,b.jsx)("option",{value:"due_date",children:"Due Date"}),(0,b.jsx)("option",{value:"priority",children:"Priority"}),(0,b.jsx)("option",{value:"title",children:"Title"})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-700",children:"Order:"}),(0,b.jsx)(N,{variant:"asc"===a.order?"primary":"secondary",size:"sm",onClick:()=>e("order","asc"===a.order?"desc":"asc"),children:"asc"===a.order?"↑ Ascending":"↓ Descending"})]})]})}function V(){let a,{signIn:d,signOut:e,session:f}={session:(a=K()).data?{user:a.data.user,token:a.data.session?.token||""}:null,signIn:I.email,signOut:J},g=async()=>{let a=prompt("Email:"),b=prompt("Password:");if(a&&b)try{await d({email:a,password:b})}catch(a){alert("Sign in failed. Please check your credentials.")}},[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({}),[r,s]=(0,c.useState)(!1),t=async()=>{if(f?.token)try{L.setToken(f.token);let a=await L.getTasks(p);i(a)}catch(a){console.error("Error fetching tasks:",a)}finally{k(!1)}};(0,c.useEffect)(()=>{f?(k(!0),t()):k(!1)},[f,p]);let u=async a=>{if(f?.token){s(!0);try{L.setToken(f.token),n?await L.updateTask(n.id,a):await L.createTask(a),m(!1),o(null),await t()}catch(a){console.error("Error saving task:",a),alert("Failed to save task. Please try again.")}finally{s(!1)}}},v=async a=>{if(f?.token)try{L.setToken(f.token),await L.toggleTaskCompletion(a),await t()}catch(a){console.error("Error toggling task:",a)}},w=async a=>{if(f?.token)try{L.setToken(f.token),await L.deleteTask(a),await t()}catch(a){console.error("Error deleting task:",a),alert("Failed to delete task. Please try again.")}},x=Array.from(new Set(h.flatMap(a=>a.tags||[])));return j?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-xl font-medium text-gray-700",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Todo App"}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:f.user?.email}),(0,b.jsx)(N,{variant:"secondary",onClick:()=>e(),children:"Sign Out"})]}):(0,b.jsx)(N,{onClick:g,children:"Sign In"})})]})})}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:f?(0,b.jsxs)(b.Fragment,{children:[l&&(0,b.jsxs)("div",{className:"mb-6 bg-white p-6 rounded-lg border border-gray-200",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:n?"Edit Task":"Create New Task"}),(0,b.jsx)(T,{task:n,onSubmit:u,onCancel:()=>{m(!1),o(null)},isSubmitting:r})]}),!l&&(0,b.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Tasks"}),(0,b.jsx)(N,{onClick:()=>m(!0),children:"+ New Task"})]}),!l&&(0,b.jsx)(U,{filters:p,onFiltersChange:q,availableTags:x}),!l&&(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsx)(P,{tasks:h,onToggleComplete:v,onEdit:a=>{o(a),m(!0)},onDelete:w,emptyMessage:Object.keys(p).length>0?"No tasks match your filters. Try adjusting your search criteria.":"No tasks yet. Create your first task above!"})})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Please sign in to manage your tasks"}),(0,b.jsx)(N,{onClick:g,children:"Sign In"})]})})]})}a.s(["default",()=>V],60350)}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map